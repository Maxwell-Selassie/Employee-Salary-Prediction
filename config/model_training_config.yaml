# ==============================================================================
# Model Training Configuration
# ==============================================================================

project:
  name: "Employee Salary Prediction"
  version: "1.0.0"
  description: "Regression model for salary prediction with MLflow tracking"

# Data Configuration
data:
  train_data: "data/processed/train_set.csv"
  val_data: "data/processed/dev_set.csv"
  test_data: "data/processed/test_set.csv"
  target_column: "Current_Salary_log"

# MLflow Configuration
mlflow:
  tracking_uri: "sqlite:///mlflow.db"  # SQLite backend
  experiment_name: "Employee_Salary_Prediction"
  
  # Model Registry
  model_registry:
    enabled: true
    model_name: "EmployeeSalaryModel"
    production_alias: "production"  # Alias for best model
    auto_register: true
    
    # Promotion criteria
    min_improvement_required: 0.0  # Any improvement over current production
    compare_with_production: true

# Runtime Constraints (Satisficing Metrics)
runtime_constraints:
  max_training_time_seconds: 10  # Models taking >10s are rejected
  enabled: true
  strict_mode: false  # If true, fail pipeline; if false, log warning

# Models to Train
models:
  baseline:
    enabled: true
    name: "Ridge"
    params:
      alpha: 1.0
      random_state: 42
  
  tree_based:
    RandomForest:
      enabled: true
      params:
        n_estimators: 100
        max_depth: 10
        min_samples_split: 5
        random_state: 42
        n_jobs: -1
    
    XGBoost:
      enabled: true
      params:
        n_estimators: 100
        max_depth: 5
        learning_rate: 0.1
        random_state: 42
        n_jobs: -1
    
    LightGBM:
      enabled: true
      params:
        n_estimators: 100
        max_depth: 7
        learning_rate: 0.1
        random_state: 42
        n_jobs: -1
        verbose: -1

# Hyperparameter Tuning (Optional - disabled for <10s constraint)
hyperparameter_tuning:
  enabled: false  # Set to true if you want tuning (will exceed 10s)
  tune_top_n_models: 2
  n_trials: 20
  timeout: 300
  cv_splits: 3

# Cross-Validation
cross_validation:
  enabled: true
  n_splits: 5
  shuffle: true
  random_state: 42

# Metrics Configuration
metrics:
  primary_metric: "neg_mean_squared_error"  # Used for model selection
  
  regression_metrics:
    - "mean_squared_error"
    - "root_mean_squared_error"
    - "mean_absolute_error"
    - "r2_score"

# Model Validation Thresholds
model_validation:
  thresholds:
    mean_squared_error:
      max: 2.0        # Fail if MSE > 2.0
      warning: 1.5    # Warn if MSE > 1.5
      target: 0.5     # Excellent if MSE < 0.5
    
    r2_score:
      min: 0.5        # Fail if R² < 0.5
      warning: 0.7    # Warn if R² < 0.7
      target: 0.9     # Excellent if R² > 0.9
    
    train_val_gap:
      max: 0.15       # Fail if gap > 15%
      warning: 0.10   # Warn if gap > 10%

# Feature Importance
feature_importance:
  enabled: true
  methods:
    native:
      enabled: true
      applicable_to: ["RandomForest", "XGBoost", "LightGBM"]
    
    permutation:
      enabled: true
      n_repeats: 5
      random_state: 42

# Plotting
plotting:
  enabled: true
  plots_dir: "plots/"
  save_formats: ["png"]
  dpi: 300

# Model Persistence
model_persistence:
  save_best_model: true
  best_model_path: "models/best_model.pkl"
  save_artifacts: true
  artifacts_path: "models/artifacts/"

# Logging
logging:
  log_dir: "logs/"
  log_level: "INFO"
  max_bytes: 10485760  # 10MB
  backup_count: 5

# Error Handling
error_handling:
  on_model_failure: "continue"  # or "stop"
  on_validation_failure: "warn"  # or "stop"